unit Unit1;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, uJxdGpBasic, uJxdGpCommon, uJxdGpTabSet, StdCtrls, uNetwork, uKeyBoardMouseEvnet, uKeyScanCode;

type
  TForm1 = class(TForm)
    xdgptbst1: TxdGpTabSet;
    btn1: TButton;
    btn2: TButton;
    edt1: TEdit;
    btn3: TButton;
    mmo1: TMemo;
    procedure btn1Click(Sender: TObject);
    procedure FormCreate(Sender: TObject);
    procedure btn2Click(Sender: TObject);
    procedure mmo1DragDrop(Sender, Source: TObject; X, Y: Integer);
    procedure mmo1DragOver(Sender, Source: TObject; X, Y: Integer; State: TDragState; var Accept: Boolean);
    procedure btn3Click(Sender: TObject);
    procedure mmo1DblClick(Sender: TObject);
  private
    FIndex: Integer;
  public
    { Public declarations }
  end;

var
  Form1: TForm1;

implementation

uses
  uRandomInfo, SHA1, Encrypt, uStringHandle;

{$R *.dfm}

procedure TForm1.btn1Click(Sender: TObject);
begin
  xdgptbst1.AddTabItem( IntToStr(FIndex), 0 );
  Inc( FIndex );
end;

procedure TForm1.btn2Click(Sender: TObject);
begin
  xdgptbst1.DeleteTabItem( StrToInt(edt1.Text) );
end;

function UniCode2GB(S: string): string;
var i: Integer;begin  i := Length(S);  Result := '';  while i >= 4 do begin    try      Result := WideChar(strtoint('$' + S[i - 3] + S[i - 2] + S[i - 1] + S[i])) + Result;    except end;    i := i - 4;  end;end;function UnicodeTostr(Unstr: string): string;var  apos: Integer;  rslt: string;begin  apos := pos('\u', Unstr);  rslt := '';  while (apos <> 0) do begin    rslt := rslt + copy(Unstr, 1, apos - 1) + UniCode2GB(copy(Unstr, (apos + 2), 4));    Delete(Unstr, 1, apos + 5);    apos := pos('\u', Unstr);  end;  Result := rslt + Unstr;end;

procedure TForm1.btn3Click(Sender: TObject);
var
  s: string;
begin
  
//  GetCacheVerifyCodeFile( edt1.Text, s );
//  ShowMessage( s );
end;

procedure TForm1.FormCreate(Sender: TObject);
var
  s1, s2, s3: string;
begin
//  s1 := Base64( URLEncode('2238914768@qq.com') );
//  ShowMessage( s1 );
//  Exit;
  s1 := SHA1DigestToStr( SHA1String( 'asd123' ) );
  //ShowMessage( s1 );
  s2 := SHA1DigestToStr( SHA1String( LowerCase(s1) ) );
  s3 := LowerCase(s2) + '1328789911' + 'CP3FHN';
  s3 := LowerCase( SHA1DigestToStr( SHA1String( s3 ) ));
  ShowMessage( s3 );
  DoubleBuffered := True;
  FIndex := 0;
end;

procedure TForm1.mmo1DblClick(Sender: TObject);
begin
  FocusInput( [KEY_SPACE] );
end;

procedure TForm1.mmo1DragDrop(Sender, Source: TObject; X, Y: Integer);
begin
//

end;

procedure TForm1.mmo1DragOver(Sender, Source: TObject; X, Y: Integer; State: TDragState; var Accept: Boolean);
begin
//
end;

end.
